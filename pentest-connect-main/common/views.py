# common/views.py
from django.shortcuts import get_object_or_404
from .models import Notification

def get_user_notifications(user):
    notifications = Notification.objects.filter(user=user).order_by('-created_at')
    return notifications

def mark_as_read(notification_id):
    notification = get_object_or_404(Notification, id=notification_id)
    notification.is_read = True
    notification.save()




from django.shortcuts import render, redirect
from .models import Notification

def notifications_view(request):
    if request.user.is_authenticated:
        notifications = Notification.objects.filter(user=request.user).order_by('-created_at')
        return render(request, 'common/notifications.html', {'notifications': notifications})
    return redirect('login')  # Redirect to login if not authenticated


